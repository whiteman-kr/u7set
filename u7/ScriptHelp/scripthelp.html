<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Scripts Help</title></head>
<body>Contents<br><br><a style="color: green;" href="#General_Information">General Information</a><br style="color: black;"><br style="color: black;"><a style="color: green;" href="#Global_Variables">Global Variables</a><br style="color: black;"><br style="color: black;"><a style="color: green;" href="#SchemaView">SchemaView</a><br style="color: black;"><a style="color: green;" href="#ScriptAppSignalController">ScriptAppSignalController</a><br style="color: black;"><a style="color: green;" href="#TuningController">TuningController</a><br style="color: black;"><br style="color: black;"><a style="color: green;" href="#Schema_Items">Schema Items</a><br><br><a style="color: green;" href="#SchemaItem">SchemaItem</a><br style="color: rgb(0, 102, 0);"><a style="color: rgb(0, 102, 0);" href="#SchemaItemLine">SchemaItemLine</a><br style="color: rgb(0, 102, 0);"><a style="color: green;" href="#SchemaItemRect">SchemaItemRect</a><br style="color: green;"><a style="color: green;" href="#SchemaItemImage">SchemaItemImage</a><br style="color: green;"><a style="color: green;" href="#SchemaItemValue">SchemaItemValue</a><br style="color: green;"><a style="color: green;" href="#SchemaItemImageValue">SchemaItemImageValue</a><br style="color: rgb(0, 153, 0);"><a style="color: green;" href="#SchemaItemLineEdit">SchemaItemLineEdit</a><br style="color: black;"><a style="color: green;" href="#SchemaItemPushButton">SchemaItemPushButton</a><br style="color: black;"><br style="color: black;"><a style="color: green;" href="#Signals_parameters_and_states">Signals Parameters and States</a><br style="color: black;"><br style="color: black;"><a style="color: green;" href="#AppSignalParam">AppSignalParam</a><br style="color: black;"><a style="color: green;" href="#AppSignalState">AppSignalState</a><br style="color: black;"><a style="color: green;" href="#TuningSignalState">TuningSignalState</a><br>&nbsp;&nbsp; &nbsp;<br><a name="General_Information"></a>General Information<br><br><span style="color: red;"></span>Using
scripts, project designer is able to customize displayed schems.
Scripts allow to change colors, text messages and other appearance
properties of schema items. Also scripts can read signals values and
set tuning signals values.<br><br>Every schema item is an object that
has a set of properties. These properties can be changed manually in
Schema Editor or by script at the run time.Also schema items have
different scripts that executed at different times: before drawing, at
mouse click etc.<br><br>To access schema items, variables and switch between schemas, global SchemaView object is provided.<br><br>To access signal values that recieved from Application Data Service, ScriptAppSignalController object is provided.<br><br>To access and set tunable signal values from Tuning Service, TuninglController object is provided.<br><br><a name="Global_Variables"><span style="font-weight: bold;">Global variables</span><br><br></a><a name="SchemaView"><span style="font-weight: bold;">SchemaView</span><br><br>Is accessed by <span style="font-weight: bold;">view</span> object name and is used for switching schemas,&nbsp; searching items and widget&nbsp;and displaying message boxes.<br><br><span style="font-weight: bold;">Functions:</span><br><br>void setSchema(QString schemaId);<br><br>sets the active schema specified in <span style="font-weight: bold;">schemaId</span> parameter.<br><br>QObject* findSchemaItem(QString objectName);<br><br>finds a schema item by its object name. Return value has SchemaItem type or null if item is not found.<br><br>QObject* findWidget(QString objectName);<br><br>finds a schema control widget (edit control, button, etc...) by its
object name. Return value has QWidget type or null if item is not found.<br><br>Q_INVOKABLE void warningMessageBox(QString text);<br><br>displayes a warning message box with specified text.<br><br>Q_INVOKABLE void errorMessageBox(QString text);<br><br>displayes an error message box with specified text.<br><br>Q_INVOKABLE void infoMessageBox(QString text);<br><br>displayes an information message box with specified text.<br><br>Q_INVOKABLE bool questionMessageBox(QString text);<br>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>displayes a question message box with specified text. If user clicked
"Yes", returns true, otherwise returns false.<br><br>QVariant variable(QString name);<br><br>retrieves a value of the variable.<br><br>void setVariable(QString name, const QString&amp; value);<br><br><span style="color: rgb(192, 192, 192);">		</span><span style="color: rgb(128, 0, 128);"></span>sets the value of the variable.<br><br><span style="font-weight: bold;">Example</span>:<br><br>view.setSchema("MYSCHEMA");<br><br><span style="font-weight: bold;"></span></a><a name="ScriptAppSignalController"></a><span style="color: black; font-weight: bold;">ScriptAppSignalController</span><br><br>Is accessed by <span style="font-weight: bold;">signals</span> object name and is used to get signals parameters and values in Monitor application.<br><br><span style="font-weight: bold;">Functions</span>:<br><br>QVariant signalParam(QString signalId) const;<br>&nbsp;&nbsp;&nbsp; <br>Returns AppSignalParam<br><br>QVariant signalParam(Hash signalHash) const;<br><br>Returns AppSignalParam<br><br>QVariant signalState(QString signalId) const;<br><br>Returns AppSignalState<br><br>QVariant signalState(Hash signalHash) const;<br><br>Returns AppSignalState<br><br>If error is orrured, for example if&nbsp;signal does not exist, the return value is <span style="font-weight: bold;">undefined.</span><br><br><span style="font-weight: bold;">Example</span>:<br><br>var sp = signals.signalParam("#SIGNALID_001");<br><br>var st = signals.signalState("SIGNALID_001");<br><br>if &nbsp;(sp == undefined || st == undefined)<br>{<br>&nbsp;&nbsp;&nbsp; return;<br>}<br><span style="font-weight: bold;"></span>&nbsp;&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;"><a name="TuningController"></a>TuningController</span><br><br>Is accessed by <span style="font-weight: bold;">tuning</span> object
name and is used to get tuning signals parameters and states, write
tuning values and in Monitor and TuningClient applications.<br><br>Q_INVOKABLE QVariant signalParam(const
QString&amp; appSignalID);<br><br>returns AppSignalParam or undefined if signal does not exist.<br><br>Q_INVOKABLE QVariant signalState(const
QString&amp; appSignalID);<br><br>returns TuningSignalState or undefined if signal does not exist.<br><br>Q_INVOKABLE bool writeValue(QString appSignalID, QVariant value);<br><br>writes value of tuning signal. If successful, returns true, otherwise returns false.<br><span style="font-weight: bold;"><br>Example</span>:<br><br>tuning.writeValue("SIGNALID", v);<br><br><a name="Schema_Items"></a>Schema Items<br><br><span style="font-weight: bold;"><a name="SchemaItem"></a>SchemaItem</span><br><br>SchemaItem is a base class for all items that are displayed on schemas.<br>&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;">Properties</span><br style="font-weight: bold;"><br><span style="font-weight: bold; font-style: italic;">ObjectName</span> (string)<br><br>A name of an item. Must be unique on the schema.<br><br><span style="font-style: italic; font-weight: bold;">AcceptClick</span><span style="font-style: italic; font-weight: bold;"> </span>(bool)<br><br>When set to true, mouse cursor is displayed as a "hand" above an item
and ClickScript is executed on the left mouse button click.<br><br><span style="font-weight: bold;"></span><span style="font-weight: bold;">Scripts</span><br><br>Parameters:<br style="font-weight: bold;"><br>schemaItem - the processed schema item. Object type: SchemaItem<br><br><span style="font-weight: bold; font-style: italic;">ClickScript</span><br><br>A script that is executed when user clicks the left mouse button on the item.<br><br>Example:<br><br>(function(schemaItem)<br>{<br>&nbsp;&nbsp;&nbsp; view.setSchema("SCHEMA002"); <br>})<br><br><span style="font-weight: bold;"><span style="font-style: italic;">PreDrawScript</span></span><br><br>A script that is executed before item is drawn.<br><br>Example:<br><br>(function(schemaItem)<br>{<br>&nbsp;&nbsp;&nbsp; enableControlBySignal(schemaItem.ObjectName, "#ANALOG_001");<br>})<br><span style="font-weight: bold;"><br>Schema items derived from SchemaItem may have special properties. </span><br><br>To change value of the property, use the following example:<br><br>schemaItem.setPropertyValue("PropertyName", PropertyValue");<br><span style="font-weight: bold;"></span><span style="font-weight: bold;"></span><br><a name="SchemaItemLine"></a><span style="font-weight: bold;">SchemaItemLine</span><br><br>This control is used to display lines.<br><br>Example of PreDrawScript for SchemaItemLine:<br><br>(function(schemaItem)<br>{<br>&nbsp;&nbsp;&nbsp; schemaItem.setPropertyValue("LineColor", "#c0c0c0");<br>})<br><span style="font-weight: bold;"></span><br><a name="SchemaItemRect"></a><span style="font-weight: bold;">SchemaItemRect</span><br><br>This control is used to display rectangles and text messages.<br><br>Example of PreDrawScript for SchemaItemRect:<br><br>(function(schemaItem)<br>{<br>&nbsp;&nbsp;&nbsp; schemaItem.setPropertyValue("Text", "Hello World");<br>&nbsp;&nbsp;&nbsp; schemaItem.setPropertyValue("FillColor", "red");<br>&nbsp;&nbsp;&nbsp; schemaItem.setPropertyValue("BackColor", "#000000");<br>})<br><span style="font-weight: bold;"><br><a name="SchemaItemImage"></a>SchemaItemImage</span><br><br>This control is used to display static images.<br style="font-weight: bold;"><span style="font-weight: bold;"><br><a name="SchemaItemValue"></a>SchemaItemValue</span><br><br>Example of PreDrawScript for SchemaItemRect:<br><br>(function(schemaItem)<br>{<br>&nbsp;&nbsp;&nbsp; .................<br><br>&nbsp;&nbsp;&nbsp; if (SignalAlerted == true)<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; schemaItem.setPropertyValue("FillColor", "red");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; schemaItem.setPropertyValue("BackColor", "white");<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; schemaItem.setPropertyValue("FillColor", "green");<br>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; schemaItem.setPropertyValue("BackColor", "black");<br>&nbsp;&nbsp;&nbsp; }<br>})<br><span style="font-weight: bold;"><br></span>This control is used to display signal values.<br style="font-weight: bold;"><span style="font-weight: bold;"><br><a name="SchemaItemImageValue"></a>SchemaItemImageValue</span><br><br>This control is used to display different images depending on signal values.<br style="font-weight: bold;"><span style="font-weight: bold;"><span style="font-style: italic;"></span></span><span style="font-weight: bold;"></span>&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;"><a name="SchemaItemLineEdit"></a>SchemaItemLineEdit</span><br><br>This control is used to create user input fields.<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;">Properties:</span><br style="font-weight: bold;"><span style="font-weight: bold;"><br><span style="font-style: italic;">StyleSheet</span></span> (string)<br><br>A stylesheet of a widget. Detailed description of this field can be found in Qt documentation.<br><br style="font-weight: bold;"><span style="font-weight: bold;"><span style="font-style: italic;">Text</span></span><span style="font-weight: bold; font-style: italic;"> </span><span style="font-weight: bold;"></span>(string)<br><br style="font-weight: bold;">Gets or sets the text in the control.<br><br><span style="font-weight: bold;"><span style="font-style: italic;">Tooltip</span></span><span style="font-weight: bold; font-style: italic;"> </span><span style="font-weight: bold;"></span>(string)<br><br>Gets or sets the tooltip text in the control.<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;">Scripts</span>:<br><br>Parameters:<br style="font-weight: bold;"><br>schemaItem - the processed schema item. Object type: SchemaItem<br><br>lineEditWidget - the processed&nbsp;widget. Object type: QLineEdit<br><br>text - current text in the control. Object type: QString<br><br><span style="font-style: italic; font-weight: bold;">AfterCreate</span><br><br>This script is executed when the control is created.<br><br>Example:<br><br>(function(schemaItem, lineEditWidget, text)<br>{<br>})<br><br><span style="font-weight: bold; font-style: italic;">EditingFinished</span><br><br>This script is executed when editing is finished<br><br>Example:<br><br>(function(schemaItem, lineEditWidget, text)<br>{<br>})<br><br><span style="font-weight: bold; font-style: italic;">ReturnPressed</span><br><br>This script is executed when Return key is pressed.<br><br>Example:<br><br>(function(schemaItem, lineEditWidget, text)<br>{<br>})<br><br><span style="font-style: italic; font-weight: bold;">TextChanged</span><br><br>This script is executed when the text is changed by user.<br><br>Example:<br><br>(function(schemaItem, lineEditWidget, text)<br>{<br>})<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><a name="SchemaItemPushButton"></a><span style="font-weight: bold;">SchemaItemPushButton</span><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;">Properties</span>:<br><br><span style="font-weight: bold; font-style: italic;">AutoRepeat</span> (bool)<br><br>If true, Clicked script is repeated while user holds the left mouse button.<br><br><span style="font-weight: bold; font-style: italic;">AutoRepeatDelay</span> (int)<br>&nbsp;&nbsp;&nbsp; <br>A delay in milliseconds before auto repeating starts.<br><br style="font-weight: bold; font-style: italic;"><span style="font-weight: bold; font-style: italic;">AutoRepeatInterval</span> (int)<br style="font-weight: bold; font-style: italic;"><br>An interval in milliseconds of auto repeating.<br><br><span style="font-weight: bold; font-style: italic;">Checkable</span> (bool)<br><br>If set, button is checkable.<br><br style="font-weight: bold; font-style: italic;"><span style="font-weight: bold; font-style: italic;">CheckedDefault</span> (bool)<br><br>The default state of checkable button.<br><br style="font-weight: bold; font-style: italic;"><span style="font-weight: bold;"><span style="font-style: italic;">StyleSheet</span></span> (string)<br><br>A stylesheet of a widget. Detailed description of this field can be found in Qt documentation.<br><br style="font-weight: bold;"><span style="font-weight: bold;"><span style="font-style: italic;">Text</span></span><span style="font-weight: bold; font-style: italic;"> </span><span style="font-weight: bold;"></span>(string)<br><br style="font-weight: bold;">Gets or sets the text in the control.<br><br><span style="font-weight: bold;"><span style="font-style: italic;">Tooltip</span></span><span style="font-weight: bold; font-style: italic;"> </span><span style="font-weight: bold;"></span>(string)<br><br>Gets or sets the tooltip text in the control.<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br><span style="font-weight: bold;">Scripts</span><span style="font-weight: bold;">:</span><br><br><span style="font-weight: bold; font-style: italic;"></span>Parameters:<br style="font-weight: bold;"><br>schemaItem - the processed schema item. Object type: SchemaItem<br><br>pushButtonWidget - the processed&nbsp;widget. Object type:&nbsp;QPushButton<br><br>checked - check state of the button. Object type: bool<br><br><span style="font-weight: bold; font-style: italic;">AfterCreate</span><br style="font-weight: bold; font-style: italic;"><span style="font-weight: bold; font-style: italic;"><br></span>This script is executed when the control is created.<br><br>Example:<br><br>(function(schemaItem, pushButtonWidget, checked)<br>{<br>})<br><span style="font-weight: bold; font-style: italic;"><br>Clicked</span><br style="font-weight: bold; font-style: italic;"><span style="font-weight: bold; font-style: italic;"><br></span>This script is executed when the left mouse button is clicked.<br><br>Example:<br><br>(function(schemaItem, pushButtonWidget, checked)<br>{<br>})<br><br><span style="font-weight: bold; font-style: italic;"></span><span style="font-weight: bold; font-style: italic;"></span><span style="font-weight: bold; font-style: italic;">Pressed</span><br>&nbsp;&nbsp; <br>This script is executed when the left mouse button is pressed.<br><br>Example:<br><br>(function(schemaItem, pushButtonWidget, checked)<br>{<br>})<br><br><span style="font-weight: bold; font-style: italic;">Released</span><br style="font-weight: bold; font-style: italic;"><span style="font-weight: bold; font-style: italic;"><br></span>This script is executed when the left mouse button is released.<br><br>Example:<br><br>(function(schemaItem, pushButtonWidget, checked)<br>{<br>})<br><span style="font-weight: bold; font-style: italic;"><br></span><span style="font-weight: bold; font-style: italic;">Toggled</span><br><br>This script is executed when the check state of the button is changed.<br><br>Example:<br><br>(function(schemaItem, pushButtonWidget, checked)<br>{<br>})<br><span style="font-weight: bold; font-style: italic;"></span><span style="font-weight: bold; font-style: italic;"></span>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br><span style="font-weight: bold;"><a name="Signals_parameters_and_states"></a>Signals parameters and states</span><br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<span style="font-weight: bold;"><br><a name="AppSignalParam"></a>AppSignalParam</span><br><br>Describes signals parameters.<br><br><span style="font-weight: bold;">Properties:</span><br><br>Hash:&nbsp;quint64;<br>AppSignalID: string;<br>CustomSignalID: string;<br>Caption: string;<br>EquipmentID:string;<br>Unit: string;<br>Precision: number;<br><span style="color: rgb(128, 0, 128);"></span><span style="color: rgb(192, 192, 192);"></span>Channel: number;<br>EnableTuning: boolean;<br>TuningDefaultValue: boolean;<br>TuningLowBound: boolean;<br>TuningHighBound: boolean;<br>IsInput: boolean;<br>IsOutput: boolean;<br>IsInternal: boolean;<br>IsAnalog: boolean;<br>IsDiscrete: boolean;<br>&nbsp;&nbsp; <br><a name="AppSignalState"></a><span style="font-weight: bold;">AppSignalState</span><br><br>Describes signal state in the Monitor application.<br><br><span style="font-weight: bold;">Properties:</span><br><br>Hash:&nbsp;quint64;<br>Value: QVariant;<br>Valid: boolean;<br>&nbsp; &nbsp;<br> <a name="TuningSignalState"></a><span style="font-weight: bold;">TuningSignalState</span><br><br>Describes tuning signal state in the Monitor and TuningClient applications.<br><br><span style="font-weight: bold;">Properties:</span><br><br>Hash: quint64;<br>Value: QVariant;<br><span style="color: rgb(192, 192, 192);"></span>LowBound<span style="color: rgb(192, 192, 192);"></span>: QVariant;<br><span style="color: rgb(192, 192, 192);"></span>HighBound: QVariant;<br>Valid: boolean;<br>OutOfRange<span style="color: rgb(192, 192, 192);"></span>: boolean;<br><span style="color: rgb(192, 192, 192);"></span>WriteInProgress<span style="color: rgb(192, 192, 192);"></span>: boolean;<br><span style="color: rgb(192, 192, 192);"></span>ControlIsEnabled: boolean;<br><span style="color: rgb(192, 192, 192);"></span>WritingIsEnabled: boolean;<span style="color: rgb(192, 192, 192);"></span>
<pre style="margin: 0px; text-indent: 0px;"><br></pre><br></body></html>